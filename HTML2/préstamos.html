<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pr√©stamos de Equipos</title>
    <style>
        body {
            overflow-x: hidden;
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            text-align: center;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        header {
            width: 100%;
            height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #000;
            color: rgb(17, 179, 57);
            font-size: 1em;
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
            animation: slideDown 1s ease-in-out;
        }

        h1 {
        font-size: 40px;
        font-family: Stencil;
        }
        
        .logo {
            height: 80px;
            margin-right: 20px;
        }

        .container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
            max-width: 600px;
            margin: 20px auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: center;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 8px 12px;
            cursor: pointer;
            border-radius: 5px;
        }
        button:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <header>
        <img src="D:\SENA\Sistema_Almacen\Software_Almacen\Img\logo_sena.png" alt="Logo Sena" class="logo">
        <h1>üì§ Gestiona tus pr√©stamos</h1>
    </header>
    <div class="container">
        <h2>Registrar Pr√©stamo</h2>
        <label>Tipo de Pr√©stamo:</label>
        <select id="tipo" onchange="cargarMateriales()">
            <option value="">Seleccionar</option>
            <option value="Consumible">Consumible</option>
            <option value="No_Consumible">No Consumible</option>
        </select>
        <br><br>
        <label>Material/Equipo:</label>
        <select id="material"></select>
        <br><br>
        <label>Cantidad:</label>
        <input type="number" id="cantidad" min="1" value="1">
        <br><br>
        <label>Instructor:</label>
        <input type="text" id="instructor" placeholder="Nombre del Instructor">
        <br><br>
        <button onclick="registrarPrestamo()">Prestar</button>
    </div>
    <h2>Historial de Pr√©stamos</h2>
    <table>
        <thead>
            <tr>
                <th>Tipo</th>
                <th>Material</th>
                <th>Cantidad</th>
                <th>Instructor</th>
                <th>Fecha</th>
                <th>Hora</th>
                <th>Estado</th>
                <th>Acci√≥n</th>
            </tr>
        </thead>
        <tbody id="historial"></tbody>
    </table>
    <script>
        const inventario = {
            Consumible: { "Papel": 20, "Tinta": 10, "Marcadores": 15 },
            No_Consumible: { "Laptop": 5, "Proyector": 2, "Impresora": 3 }
        };
        
        function cargarMateriales() {
            let tipo = document.getElementById("tipo").value;
            let materialSelect = document.getElementById("material");
            materialSelect.innerHTML = "<option value=''>Seleccionar</option>";
            
            if (tipo && inventario[tipo]) {
                for (let item in inventario[tipo]) {
                    let option = document.createElement("option");
                    option.value = item;
                    option.textContent = `${item} (${inventario[tipo][item]})`;
                    materialSelect.appendChild(option);
                }
            }
        }
        
        function registrarPrestamo() {
            let tipo = document.getElementById("tipo").value;
            let material = document.getElementById("material").value;
            let cantidad = parseInt(document.getElementById("cantidad").value);
            let instructor = document.getElementById("instructor").value;
            let historial = document.getElementById("historial");
            
            if (!tipo || !material || !instructor || cantidad < 1) {
                alert("Por favor, complete todos los campos correctamente");
                return;
            }
            
            if (inventario[tipo][material] < cantidad) {
                alert("No hay suficiente stock");
                return;
            }
            inventario[tipo][material] -= cantidad;
            cargarMateriales();
            
            let fecha = new Date();
            let fechaStr = fecha.toLocaleDateString();
            let horaStr = fecha.toLocaleTimeString();
            
            let fila = `<tr>
                <td>${tipo}</td>
                <td>${material}</td>
                <td>${cantidad}</td>
                <td>${instructor}</td>
                <td>${fechaStr}</td>
                <td>${horaStr}</td>
                <td style="color: red;">Prestado</td>
                ${tipo === 'No_Consumible' ? '<td><button onclick="devolver(this)">Devolver</button></td>' : '<td>-</td>'}
            </tr>`;
            
            historial.innerHTML += fila;
        }
        
        function devolver(boton) {
            let fila = boton.parentElement.parentElement;
            let material = fila.cells[1].textContent;
            let cantidad = parseInt(fila.cells[2].textContent);
            
            let confirmacion = confirm("¬øHubo alg√∫n problema con la devoluci√≥n?");
            if (confirmacion) {
                let evidencia = prompt("Describe el problema con la devoluci√≥n:");
                alert("Evidencia registrada: " + evidencia);
            } else {
                inventario["No_Consumible"][material] += cantidad;
                cargarMateriales();
            }
            
            fila.cells[6].textContent = "Devuelto";
            fila.cells[6].style.color = "green";
            boton.remove();
        }
    </script>
</body>
</html>
